@model Item


<form class="row">
    <div class="col-5  gx-5 card-body">
        <div ><h3>Item @Model.ItemId</h3></div>
        <img src="@Model.ImageUrl" class="img-fluid" />
        <div><h4>@Model.Category</h4></div>
       
        <div><h4>@Model.Location</h4></div>
        <br />
    </div>
    <div class="col-7">
        <h3 class="pull-right">@Model.Renting.ToString("0.00 NOK")</h3>
        <p><a href="/Item/Table">Back to Table View</a></p>
        <p><a href="/Item/Grid">Back to Grid View</a></p>
        <p>
            @if (User.IsInRole("Admin"))
            {
                <a asp-action="Update" asp-route-id="@Model.ItemId" class="btn btn-outline-success">Update</a>
                <a asp-action="Delete" asp-route-id="@Model.ItemId" class="btn btn-outline-danger">Delete</a>
            }
        </p>
    </div>
    <div class="row gx-5"><h5>@Model.Description</h5></div>
   
    
  
</form>

<div>
    @if (Model.IsBooked==true)
        {
        <div class="col-3">
        <a class=" btn btn-primary"
           asp-controller="Booking" asp-route-itemId="@Model.ItemId"
           asp-action="CreateBookingItem">New Booking</a>
           </div><br />
        <script>
            async function updateBookingPeriods() {
                var itemId = @Html.Raw(Json.Serialize(Model.ItemId));
                // AJAX request to the server
                var response = await fetch(`/Booking/BookingPeriods?itemId=${itemId}`);

                if (response.ok) {
                    var bookingPeriods = await response.text();
                    document.getElementById('bookingPeriods').innerText = bookingPeriods;
                } else {
                    console.error('Failed to fetch booking periods');
                }
            }
            // Call the function on page load
            document.addEventListener('DOMContentLoaded', function () {
                updateBookingPeriods();
            });
        </script>
        <p class="text-danger">@($"{'\u26A0'}")</p>
        <div class="bg-light text-primary d-block" id="bookingPeriods"></div>

    }
    else
    {
       
        <a class="col-3 btn btn-primary mt-3"
           asp-controller="Booking" asp-route-itemId="@Model.ItemId"
           asp-action="CreateBookingItem">Booking</a>
         
    }
</div>
